"use strict";(self.webpackChunkapp_name=self.webpackChunkapp_name||[]).push([[720],{6414:(t,e,s)=>{s.d(e,{T$:()=>o,aA:()=>i,cJ:()=>a});var r=s(6862);const i=t=>{const e={wishlist_id:t.id};return r.axiosWithAuthentication.post("wishlist/delete/",e)},a=t=>r.axiosWithAuthentication.post("wishlist/in-wishlist/",{product_variant:t}),o=t=>{const e={product_variant:t};return r.axiosWithAuthentication.post("wishlist/add/",e)}},7937:(t,e,s)=>{s.r(e),s.d(e,{default:()=>I});var r=s(2791),i=s(7689),a=s(6862),o=(s(6497),s(6593),s(1087)),c=s(184);class n extends r.PureComponent{constructor(t){super(t)}render(){return(0,c.jsxs)("div",{className:"size-selection",children:[(0,c.jsx)("h6",{className:"me-4",children:"Size "}),this.props.sizeVariant&&this.props.sizeVariant.map((t=>(0,c.jsx)(o.OL,{className:"size-variant",to:"/".concat(t.product_color_variant.product.category.slug,"/").concat(t.product_color_variant.product.slug,"/").concat(t.product_color_variant.color.name,"/").concat(t.size.name,"/").concat(t.product_color_variant.product.id,"/"),children:t.size.name},t.id)))]},"size")}}const d=n;class l extends r.PureComponent{constructor(t){super(t)}render(){return(0,c.jsxs)("div",{className:"color-selection",children:[(0,c.jsx)("h6",{className:"me-4",children:"Color "}),this.props.colorVariant&&this.props.colorVariant.map((t=>(0,c.jsx)(o.OL,{className:"color-variant",to:"/".concat(t.product_color_variant.product.category.slug,"/").concat(t.product_color_variant.product.slug,"/").concat(t.product_color_variant.color.name,"/").concat(t.size.name,"/").concat(t.product_color_variant.product.id,"/"),children:(0,c.jsx)("img",{src:t.product_color_variant.image1?t.product_color_variant.image1:t.product_color_variant.product.image_main,alt:t.product_color_variant.product.slug})},t.id))),";"]},"color")}}const u=l;var h=s(2187);class p extends r.PureComponent{constructor(t){super(t),this.handleAddToCart=t=>{this.props.singleProduct.stock<1||this.props.addToCart(t)},this.renderAddToCartIcon=t=>t<1?"Out of Stock":(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(h.Umv,{})," Add to Cart"]}),this.renderAddToCartComponent=()=>{const{singleProduct:t,loaderAddCart:e,inCart:s}=this.props;return a.token?e?(0,c.jsx)("div",{className:"add-to-cart-loader btn btn-warning p-2",children:(0,c.jsx)("div",{className:" loader-in-button "})}):s?(0,c.jsx)("div",{className:"add-to-cart ",children:(0,c.jsxs)(o.OL,{to:"/user/cart/",className:"btn btn-warning p-3",children:[(0,c.jsx)(h.L8X,{})," View Cart"]})}):(0,c.jsx)("div",{className:"add-to-cart ".concat(t.stock<1?"out-of-stock":""),children:(0,c.jsx)("button",{className:"btn btn-warning p-3",onClick:()=>this.handleAddToCart(t.id),children:this.renderAddToCartIcon(t.stock)})}):(0,c.jsx)("div",{className:"add-to-cart ",children:(0,c.jsxs)(o.rU,{to:"/user/login/",className:"btn btn-success p-3",children:[(0,c.jsx)(h.Umv,{})," Add to Cart"]})})}}render(){return(0,c.jsx)(c.Fragment,{children:this.renderAddToCartComponent()})}}const m=p;var g=s(2202),v=s(2942);class x extends r.PureComponent{constructor(t){super(t),this.renderWishlistcomponents=()=>{const{inWishlist:t,loaderAddWishlist:e,addToWishlist:s,singleProductId:r}=this.props;return a.token?e?(0,c.jsx)("div",{className:"add-to-wishlist-loader btn btn-danger p-2",children:(0,c.jsx)("div",{className:" loader-in-button "})}):t?(0,c.jsx)("div",{className:"add-to-wishlist",children:(0,c.jsxs)(o.OL,{to:"/user/dashbord/wishlist/",className:"btn btn-danger p-3",children:[(0,c.jsx)(g.FJM,{})," View Wishlist"]})}):(0,c.jsx)("div",{className:"add-to-wishlist",children:(0,c.jsxs)("button",{className:"btn btn-danger p-3",onClick:()=>s(r),children:[(0,c.jsx)(v.vQ4,{})," Add to Wishlist"]})}):(0,c.jsx)("div",{className:"add-to-wishlist",children:(0,c.jsxs)(o.rU,{to:"/user/login/",className:"btn btn-danger p-3",children:[(0,c.jsx)(v.vQ4,{})," Add to Wishlist"]})})}}render(){return(0,c.jsx)(c.Fragment,{children:this.renderWishlistcomponents()})}}const _=x;var j=s(9705),w=s(8771);class N extends r.PureComponent{constructor(t){super(t)}render(){const{singleProduct:t,changeImage:e}=this.props;return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(j.tq,{className:"available-images",direction:"vertical",cssMode:!0,slidesPerView:5,loop:!1,navigation:!0,modules:[w.W_,w.Gk],children:[t.product_color_variant.image1?(0,c.jsx)(j.o5,{className:"img",children:(0,c.jsx)("img",{className:"img-src",onMouseOver:t=>e(t),src:t.product_color_variant.image1,alt:t.product_color_variant.product.slug})}):null,t.product_color_variant.image2?(0,c.jsx)(j.o5,{className:"img",children:(0,c.jsx)("img",{className:"img-src",onMouseOver:t=>e(t),src:t.product_color_variant.image2,alt:t.product_color_variant.product.slug})}):null,t.product_color_variant.image3?(0,c.jsx)(j.o5,{className:"img",children:(0,c.jsx)("img",{className:"img-src",onMouseOver:t=>e(t),src:t.product_color_variant.image3,alt:t.product_color_variant.product.slug})}):null,t.product_color_variant.image4?(0,c.jsx)(j.o5,{className:"img",children:(0,c.jsx)("img",{className:"img-src",onMouseOver:t=>e(t),src:t.product_color_variant.image4,alt:t.product_color_variant.product.slug})}):null,t.product_color_variant.image5?(0,c.jsx)(j.o5,{className:"img",children:(0,c.jsx)("img",{className:"img-src",onMouseOver:t=>e(t),src:t.product_color_variant.image5,alt:t.product_color_variant.product.slug})}):null,t.product_color_variant.image6?(0,c.jsx)(j.o5,{className:"img",children:(0,c.jsx)("img",{className:"img-src",onMouseOver:t=>e(t),src:t.product_color_variant.image6,alt:t.product_color_variant.product.slug})}):null,t.product_color_variant.image7?(0,c.jsx)(j.o5,{className:"img",children:(0,c.jsx)("img",{className:"img-src",onMouseOver:t=>e(t),src:t.product_color_variant.image7,alt:t.product_color_variant.product.slug})}):null]})})}}const P=N;class b extends r.PureComponent{constructor(t){super(t)}render(){const{singleProduct:t}=this.props;return(0,c.jsx)("div",{className:"current-image",children:(0,c.jsx)("img",{src:t.product_color_variant.image1?t.product_color_variant.image1:t.product_color_variant.product.image_main,alt:t.product_color_variant.product.slug})})}}const f=b;class C extends r.PureComponent{constructor(t){super(t)}render(){return this.props.productDescription&&!this.props.productDescriptionLoading&&(0,c.jsxs)("div",{className:"product-description-container mt-5",children:[(0,c.jsx)("h3",{className:"section-title",children:"Product Description"}),this.props.productDescription.map(((t,e)=>(0,c.jsxs)("div",{className:"each-description ".concat(e%2===0?"right":"left"),children:[t.image?(0,c.jsx)("div",{className:"description-img",children:(0,c.jsx)("img",{src:t.image,alt:t.discription_title})}):null,(0,c.jsxs)("div",{className:"description-details",children:[(0,c.jsx)("h6",{children:t.discription_title}),(0,c.jsx)("p",{children:t.description})]})]},t.id)))]})}}const R=C;class S extends r.PureComponent{constructor(t){super(t)}render(){const{reviewSubmitHandle:t,productReviewError:e,productReviewLoading:s,productReviewSubmitted:r,handleReviewText:i}=this.props;return(0,c.jsxs)("div",{className:"review-submit-form-container",children:[(0,c.jsx)("h5",{children:"Give a review for this product"}),(0,c.jsxs)("form",{onSubmit:t,children:[(0,c.jsx)("div",{className:"reveiw-text mb-2",children:(0,c.jsx)("textarea",{onChange:i,name:"productReviewText",className:"form-control border border-secondary",required:!0,rows:5})}),s?(0,c.jsx)("div",{className:" submit-btn-container",children:(0,c.jsx)("div",{className:"btn btn-success d-flex justify-content-center w-25",children:(0,c.jsx)("div",{className:"review-submit-loader"})})}):(0,c.jsxs)("div",{className:"submit-btn-container",children:[r&&(0,c.jsx)("div",{className:"review-submit-response",children:"review submited"}),e&&(0,c.jsxs)("div",{className:"text-danger review-submit-response",children:["!",e]}),(0,c.jsx)("button",{type:"submit",className:"btn btn-sm btn-success w-25",children:"Submit"})]})]})]})}}const A=S;class W extends r.PureComponent{constructor(t){super(t)}render(){const{currentPage:t,all_pages:e,pages:s,reviewPaginator:r,changeReviewPage:i}=this.props;return(0,c.jsxs)("div",{className:"review-paginator-container",children:[0!==s&&(0,c.jsx)("button",{onClick:()=>i(t>1?t-1:t),className:"btn btn-sm btn-outline-dark me-3",children:(0,c.jsx)(g.x_l,{})}),e.map((t=>(0,c.jsx)("button",{onClick:()=>i(t),className:"me-1 btn btn-sm ".concat(r.currentPage===t?"btn-dark":"btn-outline-dark"," "),children:t},t))),0!==s&&(0,c.jsx)("button",{onClick:()=>i(t!==s?t+1:t),className:"btn btn-sm btn-outline-dark ms-2",children:(0,c.jsx)(g.Z1Y,{})})]})}}const T=W;class z extends r.PureComponent{constructor(t){super(t)}render(){const{reviewFiltered:t}=this.props;return(0,c.jsx)(c.Fragment,{children:t&&t.map((t=>(0,c.jsxs)("div",{className:"each-review-container",children:[(0,c.jsxs)("div",{className:"user-details",children:[(0,c.jsx)("div",{className:"user-img",children:(0,c.jsx)("img",{src:"h"!==t.user_info.user_image[1]?a.baseUrl+t.user_info.user_image:t.user_info.user_image,alt:t.user_info.user_name})}),(0,c.jsx)("h6",{className:"username",children:t.user_info.user_name}),(0,c.jsx)("span",{style:{marginLeft:"auto"},children:t.date})]}),(0,c.jsx)("p",{className:"user-review",children:t.review})]},t.id)))})}}const k=z;var y=s(8148),L=s(6414),F=s(8182),V=s(3537);class D extends r.PureComponent{constructor(t){super(t),this.renderProductTitleAndPrice=t=>{const e=t.product_color_variant.product.name,s=(0,V.vN)(t),r="".concat(e," ").concat(s);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("h5",{className:"product-title",children:r}),(0,c.jsx)("br",{}),(0,c.jsxs)("h6",{className:"product-price",children:["Rs.",t.price-t.price/100*t.offer,(0,c.jsxs)("span",{className:"ms-4 text-secondary text-decoration-line-through",children:["Rs.",t.price]}),(0,c.jsxs)("span",{className:"ms-4 text-success",children:[t.offer,"% off"]})]}),(0,c.jsx)("br",{}),(0,c.jsx)("br",{}),(0,c.jsx)("br",{})]})},this.addToRecentProducts=t=>{if(a.token){const e={product:t};a.axiosWithAuthentication.post("product/recent-products/",e).then((t=>{})).catch((t=>{}))}else{let t=[];window.localStorage.getItem("recentProducts")&&(t=JSON.parse(window.localStorage.getItem("recentProducts"))),t.find((t=>t.product.id===this.state.singleProduct.id))||this.state.singleProduct&&(t.push({product:this.state.singleProduct}),window.localStorage.setItem("recentProducts",JSON.stringify(t)))}},this.filterProductVariant=t=>{let e=t;const{slug:s,color:r,size:i}=this.props,a=e.filter((t=>t.product_color_variant.product.slug===s&&t.product_color_variant.color.name===r&&t.size.name===i));if(a.length<1)return;this.setState({singleProduct:a[0]}),this.addToRecentProducts(a[0].id);const o=e.filter((t=>t.product_color_variant.product.slug===s&&t.size.name===i)).sort();this.setState({colorVariant:o});const c=e.filter((t=>t.product_color_variant.product.slug===s&&t.product_color_variant.color.name===r)).sort(((t,e)=>t.size.name[0]-e.size.name[0]));this.setState({sizeVariant:c})},this.fetchProduct=()=>{a.axiosWithoutAuthentication.get("product-variants/?product_id=".concat(this.props.id)).then((t=>{this.setState({allProducts:t.data}),this.filterProductVariant(t.data)})).catch((t=>{}))},this.fetchProductDescription=()=>{const t=this.props.id;a.axiosWithoutAuthentication.get("product/description/?product_id=".concat(t)).then((t=>{t.data.length>0&&this.setState({productDescription:t.data})})).catch((t=>{}))},this.addToCart=t=>{this.setState({loaderAddCart:!0}),(0,F.fJ)(t).then((t=>{this.handleFetchCart(),this.context.handleFetchCartCount()})).catch((t=>{})).finally((()=>{setTimeout((()=>{this.setState({loaderAddCart:!1})}),2e3)}))},this.addToWishlist=t=>{this.setState({loaderAddWishlist:!0}),(0,L.T$)(t).then((t=>{this.handleFetchWishlist()})).catch((t=>{this.setState({loaderAddWishlist:!1})}))},this.handleFetchCart=async()=>{this.setState({loaderAddCart:!0});const{singleProduct:t}=this.state;t&&(0,F.iv)(t.id).then((t=>{this.setState({inCart:t.data.incart})})).catch((t=>{})).finally((()=>{this.setState({loaderAddCart:!1})}))},this.handleFetchWishlist=async()=>{this.setState({loaderAddWishlist:!0});const{singleProduct:t}=this.state;t&&(0,L.cJ)(t.id).then((t=>{this.setState({inWishlist:t.data.in_wishlist})})).catch((t=>{})).finally((()=>{this.setState({loaderAddWishlist:!1})}))},this.fetchProductReviews=()=>{const t=this.state.singleProduct.product_color_variant.product.id;a.axiosWithAuthentication.get("product/reviews/?product_id=".concat(t)).then((t=>{t.data.length>0&&this.setState({productReview:t.data})})).catch((t=>{})).then((()=>{this.setState({productReviewLoading:!1})}))},this.handleReviewText=t=>{const{name:e,value:s}=t.target;this.setState({[e]:s})},this.reviewSubmitHandle=async t=>{t.preventDefault(),this.setState({productReviewLoading:!0});const e={reveiw:this.state.productReviewText,product_id:this.state.singleProduct.product_color_variant.product.id};await a.axiosWithAuthentication.post("product/reveiw-submit/",e).then((t=>{this.fetchProductReviews(),this.setState({productReviewSubmitted:!0})})).catch((t=>{401===t.response.status&&this.setState({productReviewError:"Login required"})})).then((()=>{this.setState({productReviewLoading:!1})})),t.target.reset()},this.changeReviewPage=t=>{let e=this.state.reviewPaginator;e.currentPage=t,this.setState({...this.state.reviewPaginator,reviewPaginator:e});document.getElementById("review-and-rating").scrollIntoView({behavior:"smooth",block:"start"})},this.state={allProducts:[],singleProduct:null,colorVariant:[],sizeVariant:[],productReviewText:"",productReviewError:"",productDescriptionLoading:!1,productDescription:null,productReviewLoading:!1,productReview:null,productReviewSubmitted:!1,inCart:!1,inWishlist:!1,currentUser:!1,cartCount:null,loaderAddCart:!1,loaderAddWishlist:!1,reviewPaginator:{currentPage:1,itemPerPage:5}}}componentDidMount(){window.scrollTo(0,0),this.setState({productReviewLoading:!0}),this.fetchProduct()}componentDidUpdate(t,e){this.props!==t&&this.filterProductVariant(this.state.allProducts),this.state.singleProduct!==e.singleProduct&&a.token&&(this.handleFetchCart(),this.handleFetchWishlist()),this.state.singleProduct&&e.singleProduct!==this.state.singleProduct&&(this.fetchProductDescription(),this.fetchProductReviews())}changeImage(t){document.getElementsByClassName("current-image")[0].children[0].src=t.target.src}render(){const{itemPerPage:t,currentPage:e}=this.state.reviewPaginator,{singleProduct:s}=this.state;let i=0;if(this.state.productReview){i=Math.round(this.state.productReview.length/t),i<this.state.productReview.length/t&&(i+=1)}let a=[];for(let r=1;r<=i;r++)a.push(r);const o=t*e,n=o-t,l=this.state.productReview&&this.state.productReview.slice(n,o);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"product-main-container",children:[!s&&(0,c.jsx)("div",{className:" loader-element",children:(0,c.jsx)("div",{className:"loader"})}),s&&(0,c.jsxs)(r.Fragment,{children:[(0,c.jsxs)("div",{className:"product-image-container",children:[(0,c.jsx)(f,{singleProduct:s}),(0,c.jsx)(P,{singleProduct:s,changeImage:this.changeImage}),(0,c.jsxs)("div",{className:"add-to-cart-add-to-wishlist-container",children:[(0,c.jsx)(m,{loaderAddCart:this.state.loaderAddCart,inCart:this.state.inCart,singleProductId:s&&s.id,singleProduct:s,addToCart:this.addToCart}),(0,c.jsx)(_,{inWishlist:this.state.inWishlist,loaderAddWishlist:this.state.loaderAddWishlist,addToWishlist:this.addToWishlist,singleProductId:s&&s.id})]})]}),(0,c.jsxs)("div",{className:"product-details-container",children:[this.renderProductTitleAndPrice(s),(0,c.jsxs)("div",{className:"product-variant-selection",children:["no-color"!==s.product_color_variant.color.name&&(0,c.jsx)(u,{colorVariant:this.state.colorVariant}),"no-size"!==s.size.name&&(0,c.jsx)(d,{sizeVariant:this.state.sizeVariant})]}),(0,c.jsx)(R,{productDescription:this.state.productDescription,productDescriptionLoading:this.state.productDescriptionLoading})]})]},s.id)]}),(0,c.jsx)("br",{}),(0,c.jsx)("br",{}),(0,c.jsx)("hr",{}),(0,c.jsx)("h4",{id:"review-and-rating",className:"text-center",children:"Reviews and Rating"}),(0,c.jsx)("hr",{}),this.state.productReviewLoading?(0,c.jsx)("p",{children:"loading..."}):(0,c.jsxs)("div",{className:"review-and-rating-container",children:[(0,c.jsxs)("div",{className:"users-review-container",children:[(0,c.jsx)(k,{reviewFiltered:l}),!this.state.productReview&&!this.state.productReviewLoading&&(0,c.jsx)("h4",{children:"No reviews for this product"}),(0,c.jsx)("div",{className:"rating-star-container"}),(0,c.jsx)(T,{currentPage:e,all_pages:a,pages:i,reviewPaginator:this.state.reviewPaginator,changeReviewPage:this.changeReviewPage})]}),(0,c.jsx)(A,{reviewSubmitHandle:this.reviewSubmitHandle,handleReviewText:this.handleReviewText,productReviewLoading:this.state.productReviewLoading,productReviewSubmitted:this.state.productReviewSubmitted,productReviewError:this.state.productReviewError})]})]})}}D.contextType=y.A;const I=function(){const{category:t,slug:e,color:s,size:r,id:a}=(0,i.UO)();return(0,c.jsx)(D,{category:t,slug:e,color:s,size:r,id:a})}},3537:(t,e,s)=>{s.d(e,{G:()=>n,IF:()=>c,Nr:()=>i,e3:()=>o,vN:()=>a});var r=s(184);const i=t=>{if(!t)return;let e=t.product.product_color_variant.product.name,s=a(t.product);return e.length>40?"".concat(e.slice(0,40)," ").concat(s):"".concat(e," ").concat(s)},a=t=>{if(!t)return;const e=t.product_color_variant.color.name,s=t.size.name;let r="";return"no-color"!==e&&null!==e&&(r+="(".concat(e)),r+="no-size"!==s&&null!==s?r?", ".concat(s,")"):"(".concat(s,")"):")",r},o=t=>(0,r.jsxs)("h6",{className:"card-title",children:["Rs.",t.price-t.price/100*t.offer,(0,r.jsxs)("span",{className:"text-secondary text-decoration-line-through ms-2",children:["Rs.",t.price]}),(0,r.jsxs)("span",{className:"text-success ms-2",children:[t.offer,"%"]})]}),c=t=>{const e=t.product_color_variant.product.category.slug,s=t.product_color_variant.product.slug,r=t.product_color_variant.color.name,i=t.size.name,a=t.product_color_variant.product.id;return"/".concat(e,"/").concat(s,"/").concat(r,"/").concat(i,"/").concat(a,"/")},n=t=>t.product_color_variant.image1?t.product_color_variant.image1:t.product_color_variant.product.image_main}}]);
//# sourceMappingURL=720.7342801a.chunk.js.map