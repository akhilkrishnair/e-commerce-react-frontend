"use strict";(self.webpackChunkapp_name=self.webpackChunkapp_name||[]).push([[971],{9971:(t,a,e)=>{e.r(a),e.d(a,{default:()=>y});var r=e(2791),n=e(1087),c=e(184);class s extends r.PureComponent{render(){const{cartId:t,productVariantId:a,quantity:e,increamentCart:r}=this.props;return(0,c.jsx)(c.Fragment,{children:e<10?(0,c.jsx)("button",{onClick:()=>r(t,a,"quantity-action-loader-"+t),className:"btn btn-primary btn-sm ms-1 px-2",children:(0,c.jsx)("i",{className:"fa fa-plus"})}):(0,c.jsx)("button",{style:{opacity:"0.3",cursor:"no-drop"},className:"btn btn-primary btn-sm ms-1 px-2",children:(0,c.jsx)("i",{className:"fa fa-plus"})})})}}const i=s;class o extends r.PureComponent{render(){const{cartId:t,productVariantId:a,quantity:e,decreamentCart:r}=this.props;return(0,c.jsx)(c.Fragment,{children:e>1?(0,c.jsx)("button",{onClick:()=>r(t,a,"quantity-action-loader-"+t),className:"btn btn-primary btn-sm me-1 px-2",children:(0,c.jsx)("i",{className:"fa fa-minus"})}):(0,c.jsx)("button",{style:{opacity:"0.3",cursor:"no-drop"},className:"btn btn-primary btn-sm me-1 px-2",children:(0,c.jsx)("i",{className:"fa fa-minus"})})})}}const d=o;class l extends r.PureComponent{constructor(t){super(t),this.handleDelete=async(t,a)=>{t.target.hidden=!0,t.target.parentElement.parentElement.children[0].hidden=!1,this.setState({isDeleting:!0}),await this.props.deleteCart(a),setTimeout((()=>{this.setState({isDeleting:!1})}),1e3)},this.handleIncreamentCart=async(t,a,e)=>{document.getElementById(e).classList.add("quantity-action-loader"),await this.props.increamentCart({cartId:t,cartProductId:a}),setTimeout((()=>{document.getElementById(e).classList.remove("quantity-action-loader")}),500)},this.handleDecreamentCart=async(t,a,e)=>{document.getElementById(e).classList.add("quantity-action-loader"),await this.props.decreamentCart(t,a),setTimeout((()=>{document.getElementById(e).classList.remove("quantity-action-loader")}),500)},this.state={isDeleting:!1}}render(){const{cart:t}=this.props;return(0,c.jsx)(c.Fragment,{children:t&&t.map((t=>(0,c.jsx)("div",{className:"card rounded-3 mb-4",children:(0,c.jsx)("div",{className:"card-body p-4",children:(0,c.jsxs)("div",{className:"cart-product-container",children:[(0,c.jsx)(n.rU,{to:"/".concat(t.product_variant.product_color_variant.product.category.slug,"/").concat(t.product_variant.product_color_variant.product.slug,"/").concat(t.product_variant.product_color_variant.color.name,"/").concat(t.product_variant.size.name,"/").concat(t.product_variant.product_color_variant.product.id,"/"),className:"cart-product-img-container",children:(0,c.jsx)("img",{src:t.product_variant.product_color_variant.image1?t.product_variant.product_color_variant.image1:t.product_variant.product_color_variant.product.image_main,className:"img-fluid rounded-3",alt:"Cotton T-shirt"})}),(0,c.jsxs)("div",{className:"cart-details-container cart-product-variant",children:[(0,c.jsx)("p",{className:" fw-normal mb-2",children:"".concat(t.product_variant.product_color_variant.product.name)}),(0,c.jsxs)("p",{children:[(0,c.jsx)("span",{className:"text-muted",children:"Size: "}),t.product_variant.size.name,(0,c.jsx)("br",{}),(0,c.jsx)("span",{className:"text-muted",children:"Color: "}),t.product_variant.product_color_variant.color.name]})]}),(0,c.jsx)("div",{className:"cart-details-container cart-increament-decreament-btn",children:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(d,{cartId:t.id,quantity:t.quantity,decreamentCart:this.handleDecreamentCart}),(0,c.jsx)("label",{id:"quantity-action-loader-"+t.id,className:" form-control form-control-sm text-center w-50",children:(0,c.jsx)("span",{children:t.quantity})}),(0,c.jsx)(i,{cartId:t.id,productVariantId:t.product_variant.id,quantity:t.quantity,increamentCart:this.handleIncreamentCart})]})}),(0,c.jsx)("div",{className:"cart-details-container cart-product-stock-status-container",children:t.product_variant.stock<5&&(0,c.jsxs)("p",{className:"text-danger",children:["only ",t.product_variant.stock," items left"]})}),(0,c.jsx)("div",{className:"cart-details-container cart-product-price",children:(0,c.jsxs)("h6",{className:"mb-0",children:["Rs.",t.product_variant.price-t.product_variant.price/100*t.product_variant.offer,(0,c.jsxs)("div",{className:"text-secondary text-decoration-line-through my-2",children:["Rs.",t.product_variant.price]}),(0,c.jsxs)("div",{className:"text-success",children:[t.product_variant.offer,"%"]})]})}),(0,c.jsx)("div",{className:"cart-details-container cart-delete-btn text-end",children:(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{hidden:!0,className:"delete-loader"}),(0,c.jsx)("span",{role:"button",onClick:a=>this.handleDelete(a,t.id),className:"text-danger",children:(0,c.jsx)("i",{className:"fa fa-trash fa-lg"})})]})})]})})},t.id)))})}}const m=l;class h extends r.PureComponent{render(){const{totalAmount:t}=this.props;return(0,c.jsx)("div",{className:"card",children:(0,c.jsxs)("div",{className:"card-body ".concat(window.innerWidth>500?"d-flex justify-content-between align-items-center":"d-block"),children:[(0,c.jsx)(n.rU,{to:"/user/order/checkout/",className:"btn btn-warning btn-block btn-lg",children:"Proceed to Pay"}),(0,c.jsxs)("h5",{className:"".concat(window.innerWidth>500?" p-1 me-5":"mt-2"),children:["Total Amount : Rs. ",t]})]})})}}const u=h;var p=e(9548),x=e(8148),j=e(8182);class v extends r.PureComponent{constructor(t){super(t),this.fetchCart=async()=>{(0,j.x7)().then((t=>{this.setState({cart:t.data}),this.amountCalculation(t.data),this.context.handleCartCountCalculate(t.data.length)})).catch((t=>console.log(t))).finally((()=>this.setState({cartChecked:!0})))},this.amountCalculation=t=>{let a=0;t.forEach((t=>{a+=t.quantity*(t.product_variant.price-t.product_variant.price/100*t.product_variant.offer)})),this.setState({totalAmount:a})},this.increamentCart=async t=>{(0,j.FF)(t).then((t=>{this.fetchCart()})).catch((t=>{}))},this.decreamentCart=async t=>{(0,j.FK)(t).then((t=>{this.fetchCart()})).catch((t=>{}))},this.deleteCart=t=>{(0,j.M6)(t).then((t=>{this.fetchCart()})).catch((t=>{}))},this.state={cart:[],cartChecked:!1,totalAmount:0}}componentDidMount(){this.fetchCart()}render(){const{cart:t,cartChecked:a,totalAmount:e}=this.state;return window.scrollTo(0,0),(0,c.jsxs)("div",{className:"cart-main-container",children:[!a&&(0,c.jsx)("div",{className:"cart-loader-container",children:(0,c.jsx)("div",{className:"cart-loader"})}),a&&t.length>0&&(0,c.jsx)("div",{className:"each-cart-container",children:(0,c.jsx)("section",{className:"h-100",style:{backgroundColor:"#eee"},children:(0,c.jsx)("div",{className:"container h-100 py-5",children:(0,c.jsx)("div",{className:"row d-flex justify-content-center align-items-center h-100",children:(0,c.jsxs)("div",{className:"col-xl-10 col-sm-12",children:[(0,c.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:(0,c.jsx)("h3",{className:"fw-normal mb-0 text-black",children:"Your Cart"})}),(0,c.jsx)(m,{cart:t,decreamentCart:this.decreamentCart,increamentCart:this.increamentCart,deleteCart:this.deleteCart}),(0,c.jsx)(u,{totalAmount:e})]})})})})}),a&&0===t.length&&(0,c.jsx)("div",{className:"empty-cart-container",children:(0,c.jsx)(n.rU,{to:"/",className:"empty-cart",children:"Your Cart is Empty! Shop now"})})]})}}v.contextType=x.A;const y=(0,p.Z)(v)},9548:(t,a,e)=>{e.d(a,{Z:()=>c});var r=e(7689),n=e(184);const c=t=>a=>localStorage.getItem("accessToken")?(0,n.jsx)(t,{...a}):(0,n.jsx)(r.Fg,{to:"/"})}}]);
//# sourceMappingURL=971.25e96f37.chunk.js.map