"use strict";(self.webpackChunkapp_name=self.webpackChunkapp_name||[]).push([[378],{6414:(t,e,a)=>{a.d(e,{T$:()=>r,aA:()=>s,cJ:()=>i});var c=a(6862);const s=t=>{const e={wishlist_id:t.id};return c.axiosWithAuthentication.post("wishlist/delete/",e)},i=t=>c.axiosWithAuthentication.post("wishlist/in-wishlist/",{product_variant:t}),r=t=>{const e={product_variant:t};return c.axiosWithAuthentication.post("wishlist/add/",e)}},9378:(t,e,a)=>{a.r(e),a.d(e,{default:()=>y});var c=a(2791),s=a(1087),i=a(7689),r=a(2202),o=a(6862),n=a(8148);const{axiosWithoutAuthentication:h,axiosWithAuthentication:l}=a(6862),d=localStorage.getItem("accessToken");var p=a(6414),u=a(3537),g=a(184);class m extends c.PureComponent{render(){const{productVariants:t,productLoader:e,wishlistCheck:a}=this.props;return(0,g.jsx)(g.Fragment,{children:t&&!e&&t.map((t=>(0,g.jsx)(s.rU,{className:"product-details-link card mx-2 mb-5 ".concat(window.innerWidth>500?"mt-3":"mt1"),to:(0,u.IF)(t),children:(0,g.jsxs)("div",{className:"each-product-container",children:[(0,g.jsxs)("div",{className:"product-image-wishlist-button-container",children:[(0,g.jsx)("div",{className:"product-add-wishlist-icon",children:(0,g.jsxs)("div",{className:"wishlist-button-container",children:[(0,g.jsx)("div",{hidden:!0,className:"wishlist-action-loader"}),a(t)]})}),(0,g.jsx)("div",{className:"image-container",children:(0,g.jsx)("img",{src:(0,u.G)(t),className:"",alt:"..."})})]}),(0,g.jsxs)("div",{className:window.innerWidth>500?"card-body":"small-screen-title",children:[(0,u.e3)(t),(0,g.jsx)("p",{className:"card-title",children:(0,u.Nr)({product:t})})]})]})},t.id)))})}}const v=m;class x extends c.PureComponent{constructor(t){var e;super(t),e=this,this.changeCategory=t=>{this.setState({currentPage:1}),this.setState({activeFilter:""});let e="product-variants/?category=".concat(t);this.productVariantFetch(e)},this.fetchProductVariants=function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.setState({activeFilter:c});const s=parseInt(e.props.page),i=e.props.price;if("search"===t)s&&e.setState({currentPage:s}),e.searchProduct(e.props.query,s);else{e.setState({currentPage:1}),e.setState({productLoader:!0});let r="";t&&(t&&a&&(e.setState({currentPage:a}),r=i?"product-variants/?category=".concat(t,"&page=").concat(a||s,"&price=").concat(i):"product-variants/?category=".concat(t,"&page=").concat(a||s)),t&&!a&&(e.setState({currentPage:1}),c?i?(e.setState({currentPage:!1===a?1:a||s}),r="product-variants/?category=".concat(t).concat(s?"&page=".concat(!1===a?1:a||s):"","&price=").concat(c||i)):r="product-variants/?category=".concat(t).concat(a?"&page=".concat(a):"","&price=").concat(c):r="product-variants/?category=".concat(t))),e.productVariantFetch(r)}},this.productVariantFetch=t=>{(t=>d?l.get(t):h.get(t))(t).then((t=>{this.setState({productVariants:t.data.results}),this.setState({totalItems:t.data.count}),this.props.currentUser&&this.fetchWishlist()})).catch((t=>{})).then((()=>{this.setState({productLoader:!1}),window.scrollTo(0,0)}))},this.fetchCategory=()=>{h.get("categories/").then((t=>{this.setState({productCategories:t.data})})).catch((t=>{}))},this.handleActiveClass=t=>{this.setState({activeFilter:t})},this.searchProduct=function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.setState({productLoader:!0});let c="product-variants/?query=".concat(t);a?c="product-variants/?page=".concat(a,"&query=").concat(t):e.setState({currentPage:1}),(t=>d?l.get(t):h.get(t))(c).then((t=>{e.setState({productVariants:t.data.results}),e.setState({totalItems:t.data.count})})).catch((t=>{})).then((()=>{e.setState({productLoader:!1})}))},this.fetchWishlist=async()=>{o.token&&await o.axiosWithAuthentication.get("wishlist/").then((t=>{this.setState({wishlist:t.data})})).catch((t=>{})).then((()=>{this.setState({wishlistActionLoader:!1})}))},this.createPopUp=(t,e)=>{const a=document.createElement("div");a.textContent=t,a.id="wishlist-message-box",a.style.position="fixed",a.style.bottom="20%",a.style.left="50%",a.style.transition="0.4s lenear",a.style.transform="translate(-50%, -50%)",a.style.backgroundColor="#292929",a.style.fontWeight="bold",a.style.color="#14ab4f",a.style.padding="15px",a.style.borderRadius="5px",a.style.zIndex="99",document.body.appendChild(a),setTimeout((()=>{a.remove()}),e)},this.addToWishlist=(t,e)=>{t.preventDefault();let a=t.currentTarget.parentNode.childNodes[0],c=t.currentTarget.parentNode.childNodes[1];c.hidden=!0,a.hidden=!1;const s={product_variant:e};setTimeout((()=>{o.axiosWithAuthentication.post("wishlist/add/",s).then((t=>{this.fetchWishlist();const a=this.state.productVariants.map((t=>t.id===e?{...t,in_wishlist:!0}:t));this.setState({productVariants:a})})).catch((t=>{})).finally((()=>{c.hidden=!1,a.hidden=!0,this.createPopUp("Added to your wishlist",2e3)}))}),1e3)},this.removeWishlist=(t,e)=>{t.preventDefault();let a=t.currentTarget.parentNode.childNodes[0],c=t.currentTarget.parentNode.childNodes[1];c.hidden=!0,a.hidden=!1;let s=null;try{s=this.state.wishlist.find((t=>t.product_variant.id===e))}catch(i){}setTimeout((()=>{s?(0,p.aA)(s).then((t=>{this.fetchWishlist();const a=this.state.productVariants.map((t=>t.id===e?{...t,in_wishlist:!1}:t));this.setState({productVariants:a})})).catch((t=>{})).finally((()=>{c.hidden=!1,a.hidden=!0,this.createPopUp("Removed from your wishlist",2e3)})):(c.hidden=!1,a.hidden=!0)}),1e3)},this.changePage=t=>{this.setState({currentPage:t});const{category:e,query:a}=this.props;e?"search"===e?this.searchProduct(a,t):this.fetchProductVariants(e,t):((t=>d?l.get("product-variants/?page=".concat(t)):h.get("product-variants/?page=".concat(t)))(t).then((t=>{this.setState({productVariants:t.data.results}),this.setState({totalItems:t.data.count})})).catch((t=>{})),window.scrollTo(0,0))},this.wishlistCheck=t=>this.context?t.in_wishlist?(0,g.jsx)("span",{onClick:e=>this.removeWishlist(e,t.id),children:(0,g.jsx)(r.$0H,{style:{color:"rgb(229 4 80)"},className:"wishlist-remove-btn"})}):(0,g.jsx)("span",{onClick:e=>this.addToWishlist(e,t.id),children:(0,g.jsx)(r.$0H,{className:"wishlist-remove-btn"})}):(0,g.jsx)(s.rU,{to:"/user/login/",className:"wishlist-remove-btn",children:(0,g.jsx)(r.$0H,{className:"wishlist-remove-btn"})}),this.state={productVariants:[],productCategories:[],productLoader:!1,totalItems:0,prevPage:null,nextPage:null,currentPage:1,wishlist:null,wishlistActionLoader:!1,activeFilter:""}}componentDidMount(){window.scrollTo(0,0),this.fetchCategory(),this.fetchWishlist();const{category:t,price:e,page:a}=this.props;this.fetchProductVariants(t,!!a&&parseInt(a),e),this.handleActiveClass(e)}componentDidUpdate(t){const{category:e,page:a,price:c}=this.props;this.props!==t&&this.fetchProductVariants(e,!!a&&parseInt(a),c)}render(){const{category:t,query:e,price:a}=this.props,{productCategories:c,productVariants:i,productLoader:r,totalItems:o,currentPage:n,activeFilter:h}=this.state;let l=Math.ceil(o/8);let d=Math.max(1,n-2),p=Math.min(l,n+2);p-d+1<5&&(n<l-2?p=Math.min(l,d+5-1):d=Math.max(1,p-5+1));let u=[];for(let m=d;m<=p;m++)u.push(n===m?(0,g.jsx)(s.rU,{to:"search"===t?"/search/?query=".concat(e):void 0===t?"/?page=".concat(m):"/".concat(t,"/?page=").concat(m),className:"btn btn-sm btn-outline-primary me-1 active",children:m},m):(0,g.jsx)(s.rU,{to:"search"===t?"/search/?query=".concat(e):t&&a?"/".concat(t,"/?page=").concat(m,"&price=").concat(a):"/".concat(t,"/?page=").concat(m),className:"btn btn-sm btn-outline-primary me-1",onClick:()=>this.changePage(m),children:m},m));return(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("div",{className:"category-product-container",children:[(0,g.jsxs)("div",{className:"categories-container",children:[(0,g.jsx)("h5",{className:"text-center me-4 mb-3",children:"All Categories"}),c&&c.map((t=>(0,g.jsx)(s.OL,{to:"/".concat(t.slug,"/"),className:"each-category",onClick:()=>this.changeCategory(t.slug),children:(0,g.jsx)("div",{children:t.name})},t.id)))]}),(0,g.jsxs)("div",{className:"products-container pt-4",children:["search"!==t&&(0,g.jsxs)("div",{className:"product-filter-container w-100 ms-2 mb-5",children:[(0,g.jsx)(s.rU,{className:"filter-by-price ".concat("low"===h?"active":""),to:"/".concat(t,"/?page=1&price=low"),onClick:()=>{this.fetchProductVariants(t,!1,"low")},children:"Price low to high"}),(0,g.jsx)(s.rU,{className:"filter-by-price ".concat("high"===h?"active":""),to:"/".concat(t,"/?page=1&price=high"),onClick:()=>{this.fetchProductVariants(t,!1,"high")},children:"Price high to low"})]}),e&&"search"===t&&(0,g.jsxs)("h4",{className:"text-center mb-5 w-100",children:['searched for "',e,'"']}),(0,g.jsx)(v,{productVariants:i,productLoader:r,wishlistCheck:this.wishlistCheck}),r&&(0,g.jsx)("div",{className:"products-loader-container",children:(0,g.jsx)("div",{className:"products-loader "})}),!r&&i.length>0&&(0,g.jsxs)("div",{className:"w-100 d-flex justify-content-center mt-3",children:[(0,g.jsx)(s.rU,{to:"search"===t?"/search/?query=".concat(e,"&page=").concat(1!==n?n-1:n):void 0===t?"/?page=".concat(1!==n?n-1:n):a?"/".concat(t,"/?page=").concat(1!==n?n-1:n,"&price=").concat(a):"/".concat(t,"/?page=").concat(1!==n?n-1:n),className:"btn btn-sm btn-outline-primary me-2",onClick:()=>this.changePage(1!==n?n-1:n),children:"prev"}),u,(0,g.jsx)(s.rU,{to:"search"===t?"/search/?query=".concat(e,"&page=").concat(n!==l?n+1:n):void 0===t?"/?page=".concat(n!==l?n+1:n):a?"/".concat(t,"/?page=").concat(n!==l?n+1:n,"&price=").concat(a):"/".concat(t,"/?page=").concat(n!==l?n+1:n),className:"btn btn-sm btn-outline-primary ms-1",onClick:()=>this.changePage(n!==l?n+1:n),children:"next"})]})]})]})})}}function y(){const{category:t}=(0,i.UO)(),[e]=(0,s.lr)(),a=e.get("query"),c=e.get("page"),r=e.get("price");return(0,g.jsx)(x,{query:a,category:t,page:c,price:r})}x.contextType=n.S},3537:(t,e,a)=>{a.d(e,{G:()=>n,IF:()=>o,Nr:()=>s,e3:()=>r,vN:()=>i});var c=a(184);const s=t=>{if(!t)return;let e=t.product.product_color_variant.product.name,a=i(t.product);return e.length>40?"".concat(e.slice(0,40)," ").concat(a):"".concat(e," ").concat(a)},i=t=>{if(!t)return;const e=t.product_color_variant.color.name,a=t.size.name;let c="";return"no-color"!==e&&null!==e&&(c+="(".concat(e)),c+="no-size"!==a&&null!==a?c?", ".concat(a,")"):"(".concat(a,")"):")",c},r=t=>(0,c.jsxs)("h6",{className:"card-title",children:["Rs.",t.price-t.price/100*t.offer,(0,c.jsxs)("span",{className:"text-secondary text-decoration-line-through ms-2",children:["Rs.",t.price]}),(0,c.jsxs)("span",{className:"text-success ms-2",children:[t.offer,"%"]})]}),o=t=>{const e=t.product_color_variant.product.category.slug,a=t.product_color_variant.product.slug,c=t.product_color_variant.color.name,s=t.size.name,i=t.product_color_variant.product.id;return"/".concat(e,"/").concat(a,"/").concat(c,"/").concat(s,"/").concat(i,"/")},n=t=>t.product_color_variant.image1?t.product_color_variant.image1:t.product_color_variant.product.image_main}}]);
//# sourceMappingURL=378.3173478a.chunk.js.map