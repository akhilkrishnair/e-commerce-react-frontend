"use strict";(self.webpackChunkapp_name=self.webpackChunkapp_name||[]).push([[182],{3182:(s,e,r)=>{r.r(e),r.d(e,{default:()=>p});var t=r(2791),a=r(7689),c=r(1087),o=r(1962),d=r(6862),n=r(9548),i=r(3537),l=r(184);class u extends t.PureComponent{constructor(s){super(s),this.webSocketConnection=s=>{this.ws=new WebSocket("".concat(o.D).concat(s,"/")),this.ws.onopen=()=>{},this.ws.onmessage=s=>{"order_update"===JSON.parse(s.data).type&&this.fetchOrders()},this.ws.onclose=()=>{}},this.fetchOrders=()=>{this.setState({orderLoader:!0}),d.axiosWithAuthentication.get("orders/?orderId=".concat(this.props.orderId)).then((s=>{this.setState({singleOrder:s.data[0]}),this.ws||this.webSocketConnection(s.data[0].user_id)})).catch((s=>{}))},this.cancelOrder=s=>{d.axiosWithAuthentication.get("orders/?order_id=".concat(s)).then((s=>{this.setState({singleOrder:s.data[0]})})).catch((s=>{}))},this.renderSingleOrderImage=s=>{if(s)return s.product_variant.product_color_variant.image1?s.product_variant.product_color_variant.image1:s.product_variant.product_color_variant.product.image_main},this.renderOrderStatus=s=>s&&"Out For Delivery"===s.status&&"Delivered"===s.status?(0,l.jsx)("div",{className:"status-progress-bar",children:(0,l.jsx)("div",{className:"custom-progress-bar out-for-delivery"})}):null,this.state={singleOrder:null},this.ws=null}componentDidMount(){this.fetchOrders()}componentWillUnmount(){this.ws&&this.ws.close()}render(){const{singleOrder:s}=this.state;return(0,l.jsxs)("div",{className:"order-details-main-container",children:[(0,l.jsx)("h3",{className:"text-center mb-5",children:"Order Details"}),s?(0,l.jsxs)("div",{className:"delivery-address-container",children:[(0,l.jsx)("h5",{className:"mb-4",children:"Delivery Address"}),(0,l.jsxs)("p",{children:["Name :",s&&" "+s.order_address.full_name]}),(0,l.jsxs)("p",{children:["Mobile :",s&&" "+s.order_address.mobile]}),(0,l.jsxs)("p",{children:[s&&"".concat(s.order_address.state,",\n                            ").concat(s.order_address.city_district_town,",\n                            ").concat(s.order_address.locality,", \n                            ").concat(s.order_address.address),(0,l.jsx)("br",{}),"PIN :",s&&" "+s.order_address.pincode]})]}):(0,l.jsx)("div",{className:"order-details-loader"}),(0,l.jsx)("br",{}),(0,l.jsx)("hr",{}),s?(0,l.jsxs)("div",{className:"order-product-container",children:[(0,l.jsx)("div",{className:"order-product-image-container",children:(0,l.jsx)(c.rU,{to:s&&"/".concat(s.product_variant.product_color_variant.product.category.slug,"/").concat(s.product_variant.product_color_variant.product.slug,"/").concat(s.product_variant.product_color_variant.color.name,"/").concat(s.product_variant.size.name,"/").concat(s.product_variant.product_color_variant.product.id,"/"),className:"order-product-image",children:(0,l.jsx)("img",{src:this.renderSingleOrderImage(s),alt:"order-product.jpg"})})}),s&&"Cancelled"!==s.status?(0,l.jsxs)("div",{className:"order-product-details-container",children:[(0,l.jsxs)("h6",{children:[(0,i.Nr)({product:s.product_variant})," "]}),(0,l.jsx)("h6",{children:s&&"Rs. ".concat(s.price_was)}),(0,l.jsxs)("p",{children:["Order ID :",s&&" "+s.order_id]}),(0,l.jsxs)("p",{children:["Payment mode : ",s&&s.payment.payment_mode,(0,l.jsx)("br",{}),s&&!1===s.payment.paid?"Payment status : Pending":"Payment status : Paid"]}),(0,l.jsx)("button",{onClick:()=>this.cancelOrder(s&&s.id),style:{position:"relative",left:"60%"},className:"btn btn-danger my-4",children:"Cancel this order"}),(0,l.jsxs)("div",{className:"order-status-progress",children:[(0,l.jsx)("p",{className:s&&"Delivered"===s.status?"fw-bold text-success":"fw-bold",children:s&&s.status}),s&&"Pending"===s.status&&(0,l.jsx)("div",{className:"status-progress-bar",children:(0,l.jsx)("div",{className:"custom-progress-bar"})}),s&&"Packed"===s.status&&(0,l.jsx)("div",{className:"status-progress-bar",children:(0,l.jsx)("div",{className:"custom-progress-bar packed"})}),s&&"Shipped"===s.status&&(0,l.jsx)("div",{className:"status-progress-bar",children:(0,l.jsx)("div",{className:"custom-progress-bar shipped"})}),this.renderOrderStatus(s),(0,l.jsxs)("div",{className:"status-conditions",children:[(0,l.jsx)("span",{className:s&&"Pending"===s.status?"text-success":null,children:"Pending"}),(0,l.jsx)("span",{className:s&&"Packed"===s.status?"text-success":null,children:"Packed"}),(0,l.jsx)("span",{className:s&&"Shipped"===s.status?"text-success":null,children:"Shipped"}),(0,l.jsx)("span",{className:s&&"Out For Delivery"===s.status?"text-success":null,children:"Out for Delivery"})]})]})]}):(0,l.jsx)("div",{className:"mt-5",children:(0,l.jsx)("h6",{children:"You Cancelled this Order"})})]}):(0,l.jsx)("div",{className:"order-details-loader"})]})}}const p=(0,n.Z)((function(){const{order_id:s,orderId:e}=(0,a.UO)();return(0,l.jsx)(u,{order_id:s,orderId:e})}))},3537:(s,e,r)=>{r.d(e,{G:()=>n,IF:()=>d,Nr:()=>a,e3:()=>o,vN:()=>c});var t=r(184);const a=s=>{if(!s)return;let e=s.product.product_color_variant.product.name,r=c(s.product);return e.length>40?"".concat(e.slice(0,40)," ").concat(r):"".concat(e," ").concat(r)},c=s=>{if(!s)return;const e=s.product_color_variant.color.name,r=s.size.name;let t="";return"no-color"!==e&&null!==e&&(t+="(".concat(e)),t+="no-size"!==r&&null!==r?t?", ".concat(r,")"):"(".concat(r,")"):")",t},o=s=>(0,t.jsxs)("h6",{className:"card-title",children:["Rs.",s.price-s.price/100*s.offer,(0,t.jsxs)("span",{className:"text-secondary text-decoration-line-through ms-2",children:["Rs.",s.price]}),(0,t.jsxs)("span",{className:"text-success ms-2",children:[s.offer,"%"]})]}),d=s=>{const e=s.product_color_variant.product.category.slug,r=s.product_color_variant.product.slug,t=s.product_color_variant.color.name,a=s.size.name,c=s.product_color_variant.product.id;return"/".concat(e,"/").concat(r,"/").concat(t,"/").concat(a,"/").concat(c,"/")},n=s=>s.product_color_variant.image1?s.product_color_variant.image1:s.product_color_variant.product.image_main},9548:(s,e,r)=>{r.d(e,{Z:()=>c});var t=r(7689),a=r(184);const c=s=>e=>localStorage.getItem("accessToken")?(0,a.jsx)(s,{...e}):(0,a.jsx)(t.Fg,{to:"/"})}}]);
//# sourceMappingURL=182.88c4eade.chunk.js.map