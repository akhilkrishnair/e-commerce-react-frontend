{"version":3,"file":"static/js/182.88c4eade.chunk.js","mappings":"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","sources":["pages/OrderDetails/OrderDetails.js","utils/productUtills.js","utils/withAuthentication.js"],"sourcesContent":["import { PureComponent } from \"react\";\r\nimport { useParams } from \"react-router\";\r\nimport \"./OrderDetails.css\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { webSocketUrl } from \"App\";\r\nimport {axiosWithAuthentication} from \"intersepter/axios\";\r\nimport withAuthentication from \"utils/withAuthentication\";\r\nimport { renderProductName } from \"utils/productUtills\";\r\n\r\n\r\nclass OrderDetails extends PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            singleOrder:null,\r\n        };\r\n        this.ws = null\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.fetchOrders();\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        if (this.ws){\r\n            this.ws.close();\r\n        }\r\n    }\r\n\r\n    webSocketConnection = (user_id) => {\r\n        this.ws = new WebSocket(`${webSocketUrl}${user_id}/`)\r\n\r\n        this.ws.onopen = () => {\r\n        }\r\n\r\n        this.ws.onmessage = (e) => {\r\n            let data = JSON.parse(e.data)\r\n            if (data.type === 'order_update'){\r\n                this.fetchOrders();\r\n            }\r\n        }\r\n\r\n        this.ws.onclose = () => {}      \r\n    }\r\n\r\n    fetchOrders = () => {\r\n        this.setState({orderLoader:true})\r\n        axiosWithAuthentication\r\n        .get(`orders/?orderId=${this.props.orderId}`)\r\n        .then((res) => {\r\n            this.setState({ singleOrder: res.data[0] });\r\n            if(!this.ws){\r\n                this.webSocketConnection(res.data[0].user_id)\r\n            }\r\n        })\r\n        .catch((error) => {})\r\n    }\r\n\r\n    cancelOrder = (order_id) => {\r\n        axiosWithAuthentication\r\n        .get(`orders/?order_id=${order_id}`)\r\n        .then((res) => {\r\n            this.setState({singleOrder:res.data[0]})\r\n        }).catch((err) => {\r\n\r\n        })\r\n    }\r\n\r\n    renderSingleOrderImage = (singleOrder) => {\r\n        if(singleOrder){\r\n            if(singleOrder.product_variant.product_color_variant.image1){\r\n                return singleOrder.product_variant.product_color_variant.image1\r\n            }\r\n            return singleOrder.product_variant.product_color_variant.product.image_main\r\n        }\r\n    };\r\n\r\n    renderOrderStatus = (singleOrder) => {\r\n        if(singleOrder){\r\n            if(singleOrder.status === 'Out For Delivery' && singleOrder.status === 'Delivered'){\r\n                return <div className=\"status-progress-bar\">\r\n                            <div className=\"custom-progress-bar out-for-delivery\"></div>\r\n                        </div>\r\n            }\r\n        }\r\n        return null\r\n    }\r\n\r\n\r\n    render() {\r\n        const {singleOrder} = this.state\r\n\r\n        return (\r\n            <div className=\"order-details-main-container\">\r\n                <h3 className=\"text-center mb-5\">Order Details</h3>\r\n                {\r\n                    singleOrder?\r\n                    <div className=\"delivery-address-container\">\r\n                        <h5 className=\"mb-4\">Delivery Address</h5>\r\n                        <p>Name :{singleOrder && \" \" + singleOrder.order_address.full_name}</p>\r\n                        <p>Mobile :{singleOrder && \" \" + singleOrder.order_address.mobile}</p>\r\n                        <p>\r\n                            {singleOrder &&\r\n                                `${singleOrder.order_address.state},\r\n                            ${singleOrder.order_address.city_district_town},\r\n                            ${singleOrder.order_address.locality}, \r\n                            ${singleOrder.order_address.address}`}\r\n                            <br />\r\n                            PIN :{singleOrder && \" \" + singleOrder.order_address.pincode}\r\n                        </p>\r\n                    </div>:\r\n                    <div className=\"order-details-loader\"></div>\r\n                }\r\n                <br />\r\n                <hr />\r\n                \r\n                {\r\n                    singleOrder?\r\n                    <div className=\"order-product-container\">\r\n                        <div className=\"order-product-image-container\">\r\n                            <Link \r\n                                to={\r\n                                    singleOrder&&\r\n                                    `/${singleOrder.product_variant.product_color_variant.product.category.slug}/${singleOrder.product_variant.product_color_variant.product.slug}/${singleOrder.product_variant.product_color_variant.color.name}/${singleOrder.product_variant.size.name}/${singleOrder.product_variant.product_color_variant.product.id}/`\r\n                                } \r\n                                className=\"order-product-image\">\r\n                                    <img\r\n                                        src={this.renderSingleOrderImage(singleOrder)}\r\n                                        alt=\"order-product.jpg\"\r\n                                    />\r\n                            </Link >\r\n                        </div>\r\n\r\n                        {\r\n                            singleOrder&&singleOrder.status !== 'Cancelled'? \r\n                            <div className=\"order-product-details-container\">\r\n                                <h6>{renderProductName({product:singleOrder.product_variant})} </h6>\r\n                                <h6>\r\n                                    { singleOrder &&\r\n                                        `Rs. ${singleOrder.price_was}`}\r\n                                </h6>\r\n                                <p>Order ID :{singleOrder && \" \" + singleOrder.order_id}</p>\r\n                                <p>\r\n                                    Payment mode : {singleOrder&&singleOrder.payment.payment_mode}\r\n                                    <br/>\r\n                                    { singleOrder&&singleOrder.payment.paid===false?\"Payment status : Pending\":\"Payment status : Paid\"}\r\n                                </p>\r\n\r\n                                <button\r\n                                onClick={() => this.cancelOrder(singleOrder&&singleOrder.id)} \r\n                                style={{'position':'relative','left':'60%'}} \r\n                                className=\"btn btn-danger my-4\">\r\n                                    Cancel this order\r\n                                </button>\r\n\r\n                                <div className=\"order-status-progress\">\r\n                                    <p className={singleOrder&&singleOrder.status === 'Delivered'?'fw-bold text-success':'fw-bold'}>\r\n                                        {singleOrder&&singleOrder.status} \r\n                                    </p>\r\n\r\n                                    {singleOrder&&singleOrder.status === 'Pending'&&\r\n                                        <div className=\"status-progress-bar\">\r\n                                            <div className=\"custom-progress-bar\"></div>\r\n                                        </div>}\r\n\r\n                                    {singleOrder&&singleOrder.status === 'Packed'&&\r\n                                        <div className=\"status-progress-bar\">\r\n                                            <div className=\"custom-progress-bar packed\"></div>\r\n                                        </div>}\r\n\r\n                                    {singleOrder&&singleOrder.status === 'Shipped'&&\r\n                                        <div className=\"status-progress-bar\">\r\n                                            <div className=\"custom-progress-bar shipped\"></div>\r\n                                        </div>}\r\n\r\n                                    {this.renderOrderStatus(singleOrder)}\r\n\r\n                                    <div className=\"status-conditions\">\r\n                                        <span \r\n                                        className={singleOrder&&singleOrder.status === 'Pending'?'text-success':null} >\r\n                                            Pending\r\n                                        </span>\r\n                                        <span \r\n                                        className={singleOrder&&singleOrder.status === 'Packed'?'text-success':null} >\r\n                                            Packed\r\n                                        </span>\r\n                                        <span \r\n                                        className={singleOrder&&singleOrder.status === 'Shipped'?'text-success':null} >\r\n                                            Shipped\r\n                                        </span>\r\n                                        <span \r\n                                        className={singleOrder&&singleOrder.status === 'Out For Delivery'?'text-success':null} >\r\n                                            Out for Delivery\r\n                                        </span>\r\n                                    </div>\r\n\r\n                                </div>\r\n                            \r\n\r\n                            </div>:\r\n\r\n                            <div className=\"mt-5\">\r\n                                <h6>You Cancelled this Order</h6>\r\n                            </div>\r\n                        }\r\n                    </div>:\r\n                    <div className=\"order-details-loader\"></div>\r\n                }\r\n            </div>\r\n        );\r\n    };\r\n};\r\n\r\nfunction OrdersDetailParam() {\r\n    const { order_id, orderId } = useParams();\r\n    return <OrderDetails order_id={order_id} orderId={orderId} />;\r\n}\r\nexport default withAuthentication(OrdersDetailParam);\r\n","\r\n// render product name with variants\r\nexport const renderProductName = (rp) => {\r\n    if(!rp) return\r\n\r\n    let productName = rp.product.product_color_variant.product.name\r\n    let productVariantName = renderProductVariant(rp.product)\r\n    if(productName.length > 40){\r\n        return `${productName.slice(0,40)} ${productVariantName}`\r\n    }\r\n    return `${productName} ${productVariantName}`\r\n}\r\n\r\n// render product variants like size and color\r\nexport const renderProductVariant = (singleProduct) => {\r\n    if(!singleProduct) return\r\n    \r\n    const color = singleProduct.product_color_variant.color.name\r\n    const size = singleProduct.size.name\r\n\r\n    let variantTitle = \"\"\r\n          \r\n    if (color !== 'no-color' && color !== null){\r\n        variantTitle += `(${color}`\r\n    }\r\n    if (size !== 'no-size' && size !== null){\r\n        if (variantTitle){\r\n            variantTitle += `, ${size})`\r\n        }else{\r\n            variantTitle += `(${size})`\r\n        }\r\n    }else{\r\n        variantTitle += ')'\r\n    }\r\n\r\n    return variantTitle\r\n}\r\n\r\n// render product price with calculated offer price\r\nexport const renderProductPrice = (productVariant) => {\r\n    return <h6 className=\"card-title\">Rs.{productVariant.price - (productVariant.price/100 * productVariant.offer)}\r\n                <span className=\"text-secondary text-decoration-line-through ms-2\">Rs.{productVariant.price}</span>\r\n                <span className=\"text-success ms-2\" >{productVariant.offer}%</span>\r\n            </h6>                                   \r\n}\r\n\r\n// get product details url for href\r\nexport const getProductDetailsUrl = (productVariant) => {\r\n    const category = productVariant.product_color_variant.product.category.slug\r\n    const product = productVariant.product_color_variant.product.slug\r\n    const color = productVariant.product_color_variant.color.name\r\n    const size = productVariant.size.name\r\n    const productId = productVariant.product_color_variant.product.id\r\n    return `/${category}/${product}/${color}/${size}/${productId}/`\r\n}\r\n\r\n// get product image url\r\n\r\nexport const getProductImageUrl = (productVariant) => {\r\n    if(productVariant.product_color_variant.image1) return productVariant.product_color_variant.image1\r\n    return productVariant.product_color_variant.product.image_main\r\n}\r\n","import { Navigate } from \"react-router\"\r\n\r\n\r\nconst withAuthentication = (WrappedComponent) => {\r\n    return (props)  => {\r\n        \r\n        const accessToken = localStorage.getItem('accessToken')\r\n\r\n        if (accessToken){\r\n            return <WrappedComponent {...props} />\r\n        }\r\n        return <Navigate to={'/'} />\r\n    }\r\n}\r\n\r\nexport default withAuthentication;"],"names":["OrderDetails","PureComponent","constructor","props","super","webSocketConnection","user_id","this","ws","WebSocket","concat","webSocketUrl","onopen","onmessage","e","JSON","parse","data","type","fetchOrders","onclose","setState","orderLoader","axiosWithAuthentication","get","orderId","then","res","singleOrder","catch","error","cancelOrder","order_id","err","renderSingleOrderImage","product_variant","product_color_variant","image1","product","image_main","renderOrderStatus","status","_jsx","className","children","state","componentDidMount","componentWillUnmount","close","render","_jsxs","order_address","full_name","mobile","city_district_town","locality","address","pincode","Link","to","category","slug","color","name","size","id","src","alt","renderProductName","price_was","payment","payment_mode","paid","onClick","style","withAuthentication","useParams","rp","productName","productVariantName","renderProductVariant","length","slice","singleProduct","variantTitle","renderProductPrice","productVariant","price","offer","getProductDetailsUrl","productId","getProductImageUrl","WrappedComponent","localStorage","getItem","Navigate"],"sourceRoot":""}